{"ast":null,"code":"import _slicedToArray from \"/home/alireza/Desktop/Front/Sedreh-Asena-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/alireza/Desktop/Front/Sedreh-Asena-main/src/components/map/Map.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Mapir from \"mapir-react-component\";\nimport { PieChart, Pie, Sector, Cell, ResponsiveContainer } from \"recharts\";\nimport MapLayout from \"../layout/MapLayout\";\nimport \"./map.css\";\nimport 'react-modern-calendar-datepicker/lib/DatePicker.css';\nimport { utils } from 'react-modern-calendar-datepicker';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar mapIr = Mapir.setToken({\n  transformRequest: function transformRequest(url) {\n    return {\n      url: url,\n      headers: {\n        \"x-api-key\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\",\n        //Mapir api key\n        \"Mapir-SDK\": \"reactjs\"\n      }\n    };\n  }\n});\n\nvar search = function search(params) {\n  return fetch(\"https://map.ir/search/v2/\", {\n    method: \"POST\",\n    headers: {\n      \"x-api-key\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\",\n      //Mapir api key,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(params)\n  });\n};\n\nvar Map = function Map() {\n  _s();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _useState3 = useState(\"province eq تهران\"),\n      _useState4 = _slicedToArray(_useState3, 1),\n      $filter = _useState4[0];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      results = _useState6[0],\n      setResults = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      marker = _useState8[0],\n      setMarker = _useState8[1];\n\n  var _useState9 = useState([51.33806228911658, 35.6997848215501]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      center = _useState10[0],\n      setCenter = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      multiPol = _useState12[0],\n      setMultiPol = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      coordinateData = _useState14[0],\n      setCoordinateData = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      allData = _useState16[0],\n      setAllData = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      colorAll = _useState18[0],\n      setColorAll = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      popUpCor = _useState20[0],\n      setPopUpCor = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      address = _useState22[0],\n      setAddress = _useState22[1];\n\n  var _useState23 = useState([11]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      zoom = _useState24[0],\n      setZoom = _useState24[1];\n\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isLoading = _useState26[0],\n      setIsLoading = _useState26[1];\n\n  var persianToday = utils('fa').getToday();\n  useEffect(function () {\n    console.log(persianToday);\n  }, []);\n  useEffect(function () {\n    if (text.length > 1) {\n      var params = {};\n      var options = {\n        text: text,\n        $filter: $filter\n      };\n\n      for (var key in options) {\n        if (options[key] !== null && options[key] !== \"\") {\n          params[key] = options[key];\n        }\n      }\n\n      search(params).then(function (data) {\n        return data.json();\n      }).then(function (data) {\n        if (data[\"odata.count\"] > 0) {\n          setResults(data.value);\n        } else {\n          setResults([{\n            notFound: true\n          }]);\n        }\n      });\n    } else if (text.length === 0) {\n      setResults([]);\n    }\n  }, [text]); // useEffect(() => {\n  //   console.log('*************************************')\n  //   console.log('Hello')\n  //   console.log('*************************************')\n  //   // const req = new Request(\n  //     // \"http://5.61.26.213:8080/api/PollutionAppService/MapData\",\n  //     // \"http://127.0.0.1:8000/get_polygons\",\n  //     // {\n  //       // we turn from GET to POST\n  //       // method: \"POST\",\n  //       // headers: \"Access-Control-Allow-Origin: http://127.0.0.1:8000\"\n  //       // body: JSON.stringify({hello:'world'})\n  //     // }\n  //   // );\n  //   // req.headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n  //   // req.headers.append('Access-Control-Allow-Credentials', 'true');\n  //   fetch(req)\n  //     .then((res) => {\n  //       res.json();\n  //       console.log(res)\n  //     })\n  //     .then((data) => {\n  //       console.log(data);\n  //       const finalArr = [];\n  //       let obj = {};\n  //       const array = [];\n  //       let arr = [];\n  //       data.map((item) => {\n  //         arr.push(item.coordinates);\n  //         const index = finalArr.findIndex(\n  //           (element) => element.color === item.color\n  //         );\n  //         if (index === -1) {\n  //           obj = { color: item.color, cor: [arr] };\n  //           finalArr.push(obj);\n  //         } else {\n  //           finalArr[index].cor.push(arr);\n  //         }\n  //         // array.push(arr);\n  //         arr = [];\n  //       });\n  //       console.log(finalArr);\n  //       setMultiPol(finalArr);\n  //     })\n  //     .catch((e) => console.log(e));\n  // }, []);\n\n  useEffect(function () {\n    var properties = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        title: 'React POST Request Example'\n      })\n    };\n    fetch('http://127.0.0.1:8000/get_polygons', properties).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      return console.warn(json);\n    });\n  }, []);\n  useEffect(function () {\n    fetch('https://jsonplaceholder.typicode.com/todos/1').then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      return console.log(json);\n    });\n  }, []);\n  useEffect(function () {\n    setIsLoading(true);\n    var req = new Request( // `http://5.61.26.213:8080/api/PollutionAppService/CoordinateHourData?latitude=${popUpCor[1]}&longitude=${popUpCor[0]}`,\n    \"http://5.61.26.213:8080/api/PollutionAppService/CoordinateHourData?latitude=\".concat(popUpCor[1], \"&longitude=\").concat(popUpCor[0]), {\n      method: \"GET\"\n    });\n    console.log(\"http://5.61.26.213:8080/api/PollutionAppService/CoordinateHourData?latitude=\".concat(popUpCor[1], \"&longitude=\").concat(popUpCor[0]));\n    fetch(req).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      var array = [{\n        key: \"co\",\n        value: Math.round(data.indicator.co)\n      }, {\n        key: \"no2\",\n        value: Math.round(data.indicator.no2)\n      }, {\n        key: \"o3\",\n        value: Math.round(data.indicator.o3)\n      }, {\n        key: \"pm10\",\n        value: Math.round(data.indicator.pm10)\n      }, {\n        key: \"pm25\",\n        value: Math.round(data.indicator.pm25)\n      }, {\n        key: \"so2\",\n        value: Math.round(data.indicator.so2)\n      }];\n      var all = Math.round(data.indicator.all);\n      var val = 300 - data.indicator.all;\n      var msg = \"\";\n\n      if (all <= 50) {\n        msg = \"پاک\";\n      } else if (all <= 100 && all > 50) {\n        msg = \"سالم\";\n      } else if (all <= 150 && all > 100) {\n        msg = \"ناسالم برای گروه های حساس\";\n      } else if (all <= 200 && all > 150) {\n        msg = \"ناسالم\";\n      } else {\n        msg = \"بسیار ناسالم\";\n      }\n\n      setAllData([{\n        name: \"Group A\",\n        value: all,\n        message: msg\n      }, {\n        name: \"Group B\",\n        value: val\n      }]);\n      var color = \"\";\n\n      if (all <= 50) {\n        color = \"#00FF00\";\n      } else if (all <= 100 && all > 50) {\n        color = \"#FFFF00\";\n      } else if (all <= 150 && all > 100) {\n        color = \"#FFA500\";\n      } else if (all <= 200 && all > 150) {\n        color = \"#FF0000\";\n      } else {\n        color = \"#800080\";\n      }\n\n      console.log(data);\n      setColorAll([color, \"#f2f7f9\"]);\n      setCoordinateData(array);\n      setIsLoading(false);\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  }, [popUpCor]); // const [center, setCenter] = useState([51.42047, 35.729054]);\n\n  var reverseFunction = function reverseFunction(map, e) {\n    var lat = e.lngLat.lat;\n    var lng = e.lngLat.lng;\n    console.log(lng);\n    console.log(lat);\n    var url = \"https://map.ir/reverse/no?lat=\".concat(lat, \"&lon=\").concat(lng);\n    fetch(url, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-api-key\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\" //Mapir api key,\n\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return setAddress(data.postal_address);\n    });\n    setPopUpCor([lng, lat]);\n    setCenter([lng, lat]);\n  };\n\n  var clearSearch = function clearSearch() {\n    setResults([]);\n    setText(\"\");\n  };\n\n  var color = function color(value) {\n    if (value <= 50) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot green\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 14\n      }, _this);\n    } else if (value <= 100 && value > 50) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot yellow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 14\n      }, _this);\n    } else if (value <= 150 && value > 100) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot orange\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 14\n      }, _this);\n    } else if (value <= 200 && value > 150) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot red\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 14\n      }, _this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot purple\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 14\n      }, _this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(MapLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Mapir, {\n        className: \"mapir\",\n        containerStyle: {},\n        center: center,\n        minZoom: [13],\n        zoom: zoom,\n        scrollZoom: false,\n        hash: true,\n        interactive: true,\n        Map: mapIr,\n        onClick: reverseFunction,\n        children: [multiPol.map(function (item) {\n          return /*#__PURE__*/_jsxDEV(Mapir.GeoJSONLayer, {\n            data: {\n              type: \"FeatureCollection\",\n              features: [{\n                type: \"Feature\",\n                properties: {},\n                geometry: {\n                  type: \"MultiPolygon\",\n                  coordinates: item.cor\n                }\n              }]\n            },\n            linePaint: {\n              \"line-width\": 0\n            },\n            fillPaint: {\n              \"fill-color\": item.color,\n              \"fill-opacity\": 0.4\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, _this);\n        }), popUpCor[0] !== undefined ? /*#__PURE__*/_jsxDEV(Mapir.Popup, {\n          coordinates: popUpCor,\n          offset: null,\n          children: !isLoading && allData[0] !== undefined ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center rtl font-weight-bold font\",\n              children: [\"\\u0634\\u0627\\u062E\\u0635 \\u0622\\u0644\\u0648\\u062F\\u06AF\\u06CC : \", allData[0].value]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font text-center\",\n              children: allData[0].message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-center m-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner-border\",\n              role: \"status\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sr-only\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, _this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slidebar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 mx-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-box\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-box__item flex-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control search-input shadow\",\n                type: \"text\",\n                id: \"search\",\n                onChange: function onChange(e) {\n                  return setText(e.target.value);\n                },\n                value: text,\n                placeholder: \"\\u062C\\u0633\\u062A\\u062C\\u0648\\u06CC \\u0645\\u0648\\u0642\\u0639\\u06CC\\u062A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, _this), results.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"clear-seach\",\n                onClick: function onClick() {\n                  return clearSearch();\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \" \\u2716 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, _this), results.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container search-box__item search-results\",\n              children: results.map(function (item) {\n                if (item.notFound === true) {\n                  return /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-center p-2\",\n                    children: \"\\u0646\\u062A\\u06CC\\u062C\\u0647 \\u0627\\u06CC \\u06CC\\u0627\\u0641\\u062A \\u0646\\u0634\\u062F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 25\n                  }, _this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: function onClick() {\n                      setPopUpCor([item.geom.coordinates[0], item.geom.coordinates[1]]);\n                      setCenter(item.geom.coordinates);\n                      clearSearch();\n                      setAddress(item.address);\n                      setZoom([14]);\n                    },\n                    className: \"search-result-item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"search-result-item-title\",\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: \"https://map.ir/css/images/marker-default-white.svg\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 375,\n                        columnNumber: 29\n                      }, _this), item.title]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 374,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"search-result-item-address\",\n                      children: item.address\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 27\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 25\n                  }, _this);\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, _this), address.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"location-box  text-center mt-4 p-1\",\n            children: address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 15\n          }, _this) : null, allData.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"slide-card mt-4 mx-2 shadow text-center py-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 text-center p-2 h5\",\n              children: \"\\u0634\\u0627\\u062E\\u0635 \\u0622\\u0644\\u0648\\u062F\\u06AF\\u06CC \\u0647\\u0648\\u0627\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, _this), !isLoading ? /*#__PURE__*/_jsxDEV(PieChart, {\n              width: 250,\n              height: 150,\n              children: [/*#__PURE__*/_jsxDEV(Pie, {\n                data: allData,\n                cx: 80,\n                cy: 75,\n                startAngle: 180,\n                endAngle: 0,\n                innerRadius: 60,\n                outerRadius: 80,\n                fill: \"#8884d8\",\n                paddingAngle: 0,\n                dataKey: \"value\",\n                children: allData.map(function (entry, index) {\n                  return /*#__PURE__*/_jsxDEV(Cell, {\n                    fill: colorAll[index % colorAll.length]\n                  }, \"cell-\".concat(index), false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 25\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"text\", {\n                className: \"h2 font-weight-bold\",\n                x: 80,\n                y: 90,\n                dy: 8,\n                scaleToFit: true,\n                textAnchor: \"middle\",\n                fill: colorAll[0],\n                children: allData[0].value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"text\", {\n                x: 80,\n                y: 120,\n                dy: 8,\n                textAnchor: \"middle\",\n                fill: \"#000000\",\n                children: allData[0].message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner-border\",\n                  role: \"status\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\",\n                    children: \"Loading...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, _this) : null, coordinateData.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row slide-card mt-4 mx-2 shadow text-center py-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 text-center p-2 h5\",\n              children: \"\\u0634\\u0627\\u062E\\u0635 \\u0622\\u0644\\u0627\\u06CC\\u0646\\u062F\\u0647 \\u0647\\u0627\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, _this), !isLoading ? coordinateData.map(function (item, index) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-4 py-2\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-8 font-weight-bold px-1\",\n                    children: item.key\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-8 text-muted px-1\",\n                    children: item.value\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 25\n                  }, _this), color(item.value)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 21\n              }, _this);\n            }) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner-border\",\n                  role: \"status\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\",\n                    children: \"Loading...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, _this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Map, \"aWD2HZnf7wOFg35L4EB2W9jkXGc=\");\n\n_c = Map;\nexport default Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"sources":["/home/alireza/Desktop/Front/Sedreh-Asena-main/src/components/map/Map.js"],"names":["React","useState","useEffect","Mapir","PieChart","Pie","Sector","Cell","ResponsiveContainer","MapLayout","utils","mapIr","setToken","transformRequest","url","headers","search","params","fetch","method","body","JSON","stringify","Map","text","setText","$filter","results","setResults","marker","setMarker","center","setCenter","multiPol","setMultiPol","coordinateData","setCoordinateData","allData","setAllData","colorAll","setColorAll","popUpCor","setPopUpCor","address","setAddress","zoom","setZoom","isLoading","setIsLoading","persianToday","getToday","console","log","length","options","key","then","data","json","value","notFound","properties","title","response","warn","req","Request","array","Math","round","indicator","co","no2","o3","pm10","pm25","so2","all","val","msg","name","message","color","catch","e","reverseFunction","map","lat","lngLat","lng","postal_address","clearSearch","item","type","features","geometry","coordinates","cor","undefined","target","geom","entry","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Mapir from \"mapir-react-component\";\nimport { PieChart, Pie, Sector, Cell, ResponsiveContainer } from \"recharts\";\nimport MapLayout from \"../layout/MapLayout\";\nimport \"./map.css\";\nimport 'react-modern-calendar-datepicker/lib/DatePicker.css';\nimport {utils} from 'react-modern-calendar-datepicker';\n\nconst mapIr = Mapir.setToken({\n  transformRequest: (url) => {\n    return {\n      url: url,\n      headers: {\n        \"x-api-key\":\n          \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\", //Mapir api key\n        \"Mapir-SDK\": \"reactjs\",\n      },\n    };\n  },\n});\n\nconst search = (params) => {\n  return fetch(`https://map.ir/search/v2/`, {\n    method: \"POST\",\n    headers: {\n      \"x-api-key\":\n        \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\", //Mapir api key,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(params),\n  });\n};\n\nconst Map = () => {\n  const [text, setText] = useState(\"\");\n\n  const [$filter] = useState(\"province eq تهران\");\n\n  const [results, setResults] = useState([]);\n\n  const [marker, setMarker] = useState(null);\n\n  const [center, setCenter] = useState([51.33806228911658, 35.6997848215501]);\n\n  const [multiPol, setMultiPol] = useState([]);\n\n  const [coordinateData, setCoordinateData] = useState([]);\n\n  const [allData, setAllData] = useState([]);\n\n  const [colorAll, setColorAll] = useState([]);\n\n  const [popUpCor, setPopUpCor] = useState([]);\n\n  const [address, setAddress] = useState(\"\");\n\n  const [zoom, setZoom] = useState([11]);\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const persianToday = utils('fa').getToday();\n\n  useEffect(()=>{\n    console.log(persianToday)\n  },[])\n\n  useEffect(() => {\n    if (text.length > 1) {\n      const params = {};\n      const options = { text, $filter };\n      for (let key in options) {\n        if (options[key] !== null && options[key] !== \"\") {\n          params[key] = options[key];\n        }\n      }\n      search(params)\n        .then((data) => data.json())\n        .then((data) => {\n          if (data[\"odata.count\"] > 0) {\n            setResults(data.value);\n          } else {\n            setResults([{ notFound: true }]);\n          }\n        });\n    } else if (text.length === 0) {\n      setResults([]);\n    }\n  }, [text]);\n\n  // useEffect(() => {\n  //   console.log('*************************************')\n  //   console.log('Hello')\n  //   console.log('*************************************')\n    \n  //   // const req = new Request(\n  //     // \"http://5.61.26.213:8080/api/PollutionAppService/MapData\",\n  //     // \"http://127.0.0.1:8000/get_polygons\",\n  //     // {\n  //       // we turn from GET to POST\n  //       // method: \"POST\",\n  //       // headers: \"Access-Control-Allow-Origin: http://127.0.0.1:8000\"\n  //       // body: JSON.stringify({hello:'world'})\n        \n  //     // }\n  //   // );\n  //   // req.headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n  //   // req.headers.append('Access-Control-Allow-Credentials', 'true');\n  //   fetch(req)\n  //     .then((res) => {\n  //       res.json();\n  //       console.log(res)\n  //     })\n  //     .then((data) => {\n  //       console.log(data);\n  //       const finalArr = [];\n  //       let obj = {};\n  //       const array = [];\n  //       let arr = [];\n  //       data.map((item) => {\n  //         arr.push(item.coordinates);\n  //         const index = finalArr.findIndex(\n  //           (element) => element.color === item.color\n  //         );\n  //         if (index === -1) {\n  //           obj = { color: item.color, cor: [arr] };\n  //           finalArr.push(obj);\n  //         } else {\n  //           finalArr[index].cor.push(arr);\n  //         }\n  //         // array.push(arr);\n  //         arr = [];\n  //       });\n  //       console.log(finalArr);\n  //       setMultiPol(finalArr);\n  //     })\n  //     .catch((e) => console.log(e));\n  // }, []);\n\n  useEffect(()=>{\n    const properties = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ title: 'React POST Request Example' })\n    }\n    fetch('http://127.0.0.1:8000/get_polygons',properties)\n    .then(response => response.json())\n    .then(json => console.warn(json))\n  }\n  ,[])\n\n  useEffect(()=>{\n    fetch('https://jsonplaceholder.typicode.com/todos/1')\n    .then(response => response.json())\n    .then(json => console.log(json))\n  }\n  ,[])\n\n  useEffect(() => {\n    setIsLoading(true);\n    const req = new Request(\n      // `http://5.61.26.213:8080/api/PollutionAppService/CoordinateHourData?latitude=${popUpCor[1]}&longitude=${popUpCor[0]}`,\n      `http://5.61.26.213:8080/api/PollutionAppService/CoordinateHourData?latitude=${popUpCor[1]}&longitude=${popUpCor[0]}`,\n      {\n        method: \"GET\",\n      }\n    );\n    console.log(`http://5.61.26.213:8080/api/PollutionAppService/CoordinateHourData?latitude=${popUpCor[1]}&longitude=${popUpCor[0]}`)\n    fetch(req)\n      .then((response) => response.json())\n      .then((data) => {\n        const array = [\n          {\n            key: \"co\",\n            value: Math.round(data.indicator.co),\n          },\n          {\n            key: \"no2\",\n            value: Math.round(data.indicator.no2),\n          },\n          {\n            key: \"o3\",\n            value: Math.round(data.indicator.o3),\n          },\n          {\n            key: \"pm10\",\n            value: Math.round(data.indicator.pm10),\n          },\n          {\n            key: \"pm25\",\n            value: Math.round(data.indicator.pm25),\n          },\n          {\n            key: \"so2\",\n            value: Math.round(data.indicator.so2),\n          },\n        ];\n        const all = Math.round(data.indicator.all);\n        const val = 300 - data.indicator.all;\n        let msg = \"\";\n        if (all <= 50) {\n          msg = \"پاک\";\n        } else if (all <= 100 && all > 50) {\n          msg = \"سالم\";\n        } else if (all <= 150 && all > 100) {\n          msg = \"ناسالم برای گروه های حساس\";\n        } else if (all <= 200 && all > 150) {\n          msg = \"ناسالم\";\n        } else {\n          msg = \"بسیار ناسالم\";\n        }\n        setAllData([\n          { name: \"Group A\", value: all, message: msg },\n          { name: \"Group B\", value: val },\n        ]);\n        let color = \"\";\n        if (all <= 50) {\n          color = \"#00FF00\";\n        } else if (all <= 100 && all > 50) {\n          color = \"#FFFF00\";\n        } else if (all <= 150 && all > 100) {\n          color = \"#FFA500\";\n        } else if (all <= 200 && all > 150) {\n          color = \"#FF0000\";\n        } else {\n          color = \"#800080\";\n        }\n        console.log(data);\n        setColorAll([color, \"#f2f7f9\"]);\n        setCoordinateData(array);\n        setIsLoading(false);\n      })\n      .catch((e) => console.log(e));\n  }, [popUpCor]);\n\n  // const [center, setCenter] = useState([51.42047, 35.729054]);\n\n  const reverseFunction = (map, e) => {\n    const lat = e.lngLat.lat;\n    const lng = e.lngLat.lng;\n    console.log(lng);\n    console.log(lat);\n    var url = `https://map.ir/reverse/no?lat=${lat}&lon=${lng}`;\n    fetch(url, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-api-key\":\n          \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\", //Mapir api key,\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => setAddress(data.postal_address));\n    setPopUpCor([lng, lat]);\n    setCenter([lng, lat]);\n  };\n\n  const clearSearch = () => {\n    setResults([]);\n    setText(\"\");\n  };\n\n  const color = (value) => {\n    if (value <= 50) {\n      return <div className=\"dot green\"></div>;\n    } else if (value <= 100 && value > 50) {\n      return <div className=\"dot yellow\"></div>;\n    } else if (value <= 150 && value > 100) {\n      return <div className=\"dot orange\"></div>;\n    } else if (value <= 200 && value > 150) {\n      return <div className=\"dot red\"></div>;\n    } else {\n      return <div className=\"dot purple\"></div>;\n    }\n  };\n\n  return (\n    <MapLayout>\n      <div className=\"wrapper\">\n        <Mapir\n          className=\"mapir\"\n          containerStyle={{}}\n          center={center}\n          minZoom={[13]}\n          zoom={zoom}\n          scrollZoom={false}\n          hash={true}\n          interactive={true}\n          Map={mapIr}\n          onClick={reverseFunction}\n        >\n          {multiPol.map((item) => (\n            <Mapir.GeoJSONLayer\n              data={{\n                type: \"FeatureCollection\",\n                features: [\n                  {\n                    type: \"Feature\",\n                    properties: {},\n                    geometry: {\n                      type: \"MultiPolygon\",\n                      coordinates: item.cor,\n                    },\n                  },\n                ],\n              }}\n              linePaint={{\n                \"line-width\": 0,\n              }}\n              fillPaint={{\n                \"fill-color\": item.color,\n                \"fill-opacity\": 0.4,\n              }}\n            />\n          ))}\n          {popUpCor[0] !== undefined ? (\n            <Mapir.Popup coordinates={popUpCor} offset={null}>\n              {!isLoading && allData[0] !== undefined ? (\n                <>\n                  <div className=\"text-center rtl font-weight-bold font\">\n                    شاخص آلودگی : {allData[0].value}\n                  </div>\n                  <p className=\"font text-center\">{allData[0].message}</p>\n                </>\n              ) : (\n                <div className=\"d-flex justify-content-center m-4\">\n                  <div className=\"spinner-border\" role=\"status\">\n                    <span className=\"sr-only\">Loading...</span>\n                  </div>\n                </div>\n              )}\n            </Mapir.Popup>\n          ) : null}\n        </Mapir>\n\n        <div className=\"slidebar\">\n          <div className=\"mt-4 mx-3\">\n            <div className=\"search-box\">\n              <div className=\"search-box__item flex-row\">\n                <input\n                  className=\"form-control search-input shadow\"\n                  type=\"text\"\n                  id=\"search\"\n                  onChange={(e) => setText(e.target.value)}\n                  value={text}\n                  placeholder=\"جستجوی موقعیت\"\n                />\n                {results.length > 0 && (\n                  <div className=\"clear-seach\" onClick={() => clearSearch()}>\n                    <span> &#10006; </span>\n                  </div>\n                )}\n              </div>\n              {results.length > 0 && (\n                <div className=\"container search-box__item search-results\">\n                  {results.map((item) => {\n                    if (item.notFound === true) {\n                      return (\n                        <p className=\"text-center p-2\">نتیجه ای یافت نشد</p>\n                      );\n                    } else {\n                      return (\n                        <div\n                          onClick={() => {\n                            setPopUpCor([\n                              item.geom.coordinates[0],\n                              item.geom.coordinates[1],\n                            ]);\n                            setCenter(item.geom.coordinates);\n                            clearSearch();\n                            setAddress(item.address);\n                            setZoom([14]);\n                          }}\n                          className=\"search-result-item\"\n                        >\n                          <p className=\"search-result-item-title\">\n                            <img src=\"https://map.ir/css/images/marker-default-white.svg\" />\n                            {item.title}\n                          </p>\n                          <p className=\"search-result-item-address\">\n                            {item.address}\n                          </p>\n                        </div>\n                      );\n                    }\n                  })}\n                </div>\n              )}\n            </div>\n            {address.length > 0 ? (\n              <div className=\"location-box  text-center mt-4 p-1\">\n                {address}\n              </div>\n            ) : null}\n\n            {allData.length > 0 ? (\n              <div className=\"slide-card mt-4 mx-2 shadow text-center py-3\">\n                <div className=\"col-12 text-center p-2 h5\">شاخص آلودگی هوا</div>\n                {!isLoading ? (\n                  <PieChart width={250} height={150}>\n                    <Pie\n                      data={allData}\n                      cx={80}\n                      cy={75}\n                      startAngle={180}\n                      endAngle={0}\n                      innerRadius={60}\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      paddingAngle={0}\n                      dataKey=\"value\"\n                    >\n                      {allData.map((entry, index) => (\n                        <Cell\n                          key={`cell-${index}`}\n                          fill={colorAll[index % colorAll.length]}\n                        />\n                      ))}\n                    </Pie>\n                    <text\n                      className=\"h2 font-weight-bold\"\n                      x={80}\n                      y={90}\n                      dy={8}\n                      scaleToFit={true}\n                      textAnchor=\"middle\"\n                      fill={colorAll[0]}\n                    >\n                      {allData[0].value}\n                    </text>\n                    <text\n                      x={80}\n                      y={120}\n                      dy={8}\n                      textAnchor=\"middle\"\n                      fill={\"#000000\"}\n                    >\n                      {allData[0].message}\n                    </text>\n                  </PieChart>\n                ) : (\n                  <div className=\"col-12\">\n                    <div className=\"d-flex justify-content-center\">\n                      <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ) : null}\n\n            {coordinateData.length > 0 ? (\n              <div className=\"row slide-card mt-4 mx-2 shadow text-center py-3\">\n                <div className=\"col-12 text-center p-2 h5\">شاخص آلاینده ها</div>\n                {!isLoading ? (\n                  coordinateData.map((item, index) => (\n                    <div className=\"col-4 py-2\">\n                      <div className=\"row\">\n                        <div className=\"col-8 font-weight-bold px-1\">\n                          {item.key}\n                        </div>\n                        <div className=\"col-8 text-muted px-1\">\n                          {item.value}\n                        </div>\n                        {color(item.value)}\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"col-12\">\n                    <div className=\"d-flex justify-content-center\">\n                      <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </MapLayout>\n  );\n};\nexport default Map;\n"]},"metadata":{},"sourceType":"module"}