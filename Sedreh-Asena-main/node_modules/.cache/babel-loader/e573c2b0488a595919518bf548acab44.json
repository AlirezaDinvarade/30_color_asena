{"ast":null,"code":"import _slicedToArray from \"/home/alireza/Desktop/Front/Sedreh-Asena-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/alireza/Desktop/Front/Sedreh-Asena-main/src/components/map/Map.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Mapir from \"mapir-react-component\";\nimport { PieChart, Pie, Sector, Cell, ResponsiveContainer } from \"recharts\";\nimport MapLayout from \"../layout/MapLayout\";\nimport \"./map.css\";\nimport 'react-modern-calendar-datepicker/lib/DatePicker.css';\nimport { utils } from 'react-modern-calendar-datepicker';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar mapIr = Mapir.setToken({\n  transformRequest: function transformRequest(url) {\n    return {\n      url: url,\n      headers: {\n        \"x-api-key\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\",\n        //Mapir api key\n        \"Mapir-SDK\": \"reactjs\"\n      }\n    };\n  }\n});\n\nvar search = function search(params) {\n  return fetch(\"https://map.ir/search/v2/\", {\n    method: \"POST\",\n    headers: {\n      \"x-api-key\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\",\n      //Mapir api key,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(params)\n  });\n};\n\nvar Map = function Map() {\n  _s();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _useState3 = useState(\"province eq تهران\"),\n      _useState4 = _slicedToArray(_useState3, 1),\n      $filter = _useState4[0];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      results = _useState6[0],\n      setResults = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      marker = _useState8[0],\n      setMarker = _useState8[1];\n\n  var _useState9 = useState([51.33806228911658, 35.6997848215501]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      center = _useState10[0],\n      setCenter = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      multiPol = _useState12[0],\n      setMultiPol = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      coordinateData = _useState14[0],\n      setCoordinateData = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      allData = _useState16[0],\n      setAllData = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      colorAll = _useState18[0],\n      setColorAll = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      popUpCor = _useState20[0],\n      setPopUpCor = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      address = _useState22[0],\n      setAddress = _useState22[1];\n\n  var _useState23 = useState([11]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      zoom = _useState24[0],\n      setZoom = _useState24[1];\n\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isLoading = _useState26[0],\n      setIsLoading = _useState26[1];\n\n  var persianToday = utils('fa').getToday();\n  useEffect(function () {\n    console.log(persianToday);\n  }, []);\n  useEffect(function () {\n    if (text.length > 1) {\n      var params = {};\n      var options = {\n        text: text,\n        $filter: $filter\n      };\n\n      for (var key in options) {\n        if (options[key] !== null && options[key] !== \"\") {\n          params[key] = options[key];\n        }\n      }\n\n      search(params).then(function (data) {\n        return data.json();\n      }).then(function (data) {\n        if (data[\"odata.count\"] > 0) {\n          setResults(data.value);\n        } else {\n          setResults([{\n            notFound: true\n          }]);\n        }\n      });\n    } else if (text.length === 0) {\n      setResults([]);\n    }\n  }, [text]);\n  useEffect(function () {\n    axios.post(\"http://127.0.0.1:8000/get_polygons\", null, {}).then(function (_ref) {\n      var data = _ref.data;\n      console.log(data); // data.indicator.map((item) => {\n      // finalArr.cor.push(item.coordinates)\n      // if (item.AQI <= 50) {\n      //   finalArr[0].cor.push(item.coordinates)\n      // } else if (item.AQI <= 100 && item.AQI > 50) {\n      //   finalArr[1].cor.push(item.coordinates)\n      // } else if (item.AQI <= 150 && item.AQI > 100) {\n      //   finalArr[2].cor.push(item.coordinates)\n      // } else if (item.AQI <= 200 && item.AQI > 150) {\n      //   finalArr[3].cor.push(item.coordinates)\n      // } else {\n      //   finalArr[4].cor.push(item.coordinates)\n      // }\n      // });\n      // console.log(finalArr);\n\n      setMultiPol(data.indicator);\n      multiPol.map(function (item) {\n        console.log(item, \"multipol item =========>\");\n        console.log([[item.coordinates]]);\n      });\n    }, []); //  useEffect(() => {\n    //   console.log('*************************************')\n    //   console.log('Hello')\n    //   console.log('*************************************')\n    //   let headers = new Headers();\n    //   headers.append('Content-Type', 'application/json');\n    //   headers.append('Accept', 'application/json');\n    //   headers.append('Origin','http://localhost:3000');\n    //   headers.append('GET', 'POST', 'OPTIONS');\n    //   const req = new Request(\n    //     // \"http://5.61.26.213:8080/api/PollutionAppService/MapData\",\n    //     \"http://127.0.0.1:8000/get_polygons\",\n    //     {\n    //       // we turn from GET to POST\n    //       method: \"POST\",\n    //       mode: 'no-cors',\n    //       headers: headers\n    //       // body: JSON.stringify({hello:'world'})\n    //     }\n    //   );\n    //   // req.headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n    //   // req.headers.append('Access-Control-Allow-Credentials', 'true');\n    //   fetch(req)\n    //     .then((res) => {\n    //       // res.json();\n    //       console.error(typeof res,res,\"------- u u -----\")\n    //     })\n    //     .then((data) => {\n    //       console.log(data);\n    //       const finalArr = [];\n    //       let obj = {};\n    //       const array = [];\n    //       let arr = [];\n    //       data.map((item) => {\n    //         arr.push(item.coordinates);\n    //         const index = finalArr.findIndex(\n    //           (element) => element.color === item.color\n    //         );\n    //         if (index === -1) {\n    //           obj = { color: item.color, cor: [arr] };\n    //           finalArr.push(obj);\n    //         } else {\n    //           finalArr[index].cor.push(arr);\n    //         }\n    //         // array.push(arr);\n    //         arr = [];\n    //       });\n    //       console.log(finalArr);\n    //       setMultiPol(finalArr);\n    //     })\n    //     .catch((e) => console.log(e,\"----------------------Error happend-----------------\"));\n  }, []); // useEffect(()=>{\n  //   const properties = {\n  //       method: 'POST',\n  //       headers: { 'Content-Type': 'application/json' ,\n  //       'Access-Control-Allow-Origin':'http://localhost:3000',\n  //       'Access-Control-Allow-Credentials': 'true'\n  //      },\n  //       // body: JSON.stringify({ title: 'React POST Request Example' })\n  //   }\n  //   fetch('http://127.0.0.1:8000/get_polygons',properties)\n  //   .then(response => response.json())\n  //   .then(data => console.warn(data)).catch((e)=> console.error(e,\"----------------------Bad Error-------------\"))\n  // }\n  // ,[])\n\n  useEffect(function () {\n    setIsLoading(true);\n    var params = new URLSearchParams();\n    params.append('lat', popUpCor[1]);\n    params.append('lon', popUpCor[0]);\n    axios.post(\"http://127.0.0.1:8000/get_point\", params, {}).then(function (_ref2) {\n      var data = _ref2.data;\n      console.log(data);\n      var array = [{\n        key: \"co\",\n        value: Math.round(data.indicator.CO)\n      }, {\n        key: \"no2\",\n        value: Math.round(data.indicator.NO2)\n      }, {\n        key: \"o3\",\n        value: Math.round(data.indicator.O3)\n      }, {\n        key: \"pm10\",\n        value: Math.round(data.indicator.PM10)\n      }, {\n        key: \"pm25\",\n        value: Math.round(data.indicator.PM2_5)\n      }, {\n        key: \"so2\",\n        value: Math.round(data.indicator.SO2)\n      }];\n      var aqi = Math.round(data.indicator.AQI);\n      var msg = \"\";\n\n      if (aqi <= 50) {\n        msg = \"پاک\";\n      } else if (aqi <= 100 && aqi > 50) {\n        msg = \"سالم\";\n      } else if (aqi <= 150 && aqi > 100) {\n        msg = \"ناسالم برای گروه های حساس\";\n      } else if (aqi <= 200 && aqi > 150) {\n        msg = \"ناسالم\";\n      } else {\n        msg = \"بسیار ناسالم\";\n      }\n\n      var all = Math.round(aqi);\n      setAllData([{\n        name: \"Group A\",\n        value: all,\n        message: msg\n      }, {\n        name: \"Group B\",\n        value: 300 - aqi\n      }]);\n      var color = \"\";\n\n      if (aqi <= 50) {\n        color = \"#00FF00\";\n      } else if (aqi <= 100 && aqi > 50) {\n        color = \"#FFFF00\";\n      } else if (aqi <= 150 && aqi > 100) {\n        color = \"#FFA500\";\n      } else if (aqi <= 200 && aqi > 150) {\n        color = \"#FF0000\";\n      } else {\n        color = \"#800080\";\n      } // console.log(data);\n\n\n      setColorAll([color, \"#f2f7f9\"]);\n      setCoordinateData(array);\n      setIsLoading(false);\n    }).catch(function (err) {\n      return console.log(err, \"======== error in post\");\n    });\n  }, [popUpCor]); // const [center, setCenter] = useState([51.42047, 35.729054]);\n\n  var reverseFunction = function reverseFunction(map, e) {\n    var lat = e.lngLat.lat;\n    var lng = e.lngLat.lng;\n    console.log(lng);\n    console.log(lat);\n    var url = \"https://map.ir/reverse/no?lat=\".concat(lat, \"&lon=\").concat(lng);\n    fetch(url, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-api-key\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\" //Mapir api key,\n\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return setAddress(data.postal_address);\n    });\n    setPopUpCor([lng - 30, lat - 30]);\n    console.warn(popUpCor, \"popup coooooooooooooooooooooor\");\n    setCenter([lng, lat]);\n  };\n\n  var clearSearch = function clearSearch() {\n    setResults([]);\n    setText(\"\");\n  };\n\n  var color = function color(value) {\n    if (value <= 50) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot green\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 14\n      }, _this);\n    } else if (value <= 100 && value > 50) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot yellow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 14\n      }, _this);\n    } else if (value <= 150 && value > 100) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot orange\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 14\n      }, _this);\n    } else if (value <= 200 && value > 150) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot red\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 14\n      }, _this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dot purple\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 14\n      }, _this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(MapLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Mapir, {\n        className: \"mapir\",\n        containerStyle: {},\n        center: center,\n        minZoom: [13],\n        zoom: zoom,\n        scrollZoom: false,\n        hash: true,\n        interactive: true,\n        Map: mapIr,\n        onClick: reverseFunction,\n        children: [multiPol.map(function (item, index) {\n          return /*#__PURE__*/_jsxDEV(Mapir.GeoJSONLayer, {\n            data: {\n              type: \"FeatureCollection\",\n              features: [{\n                type: \"Feature\",\n                properties: {},\n                geometry: {\n                  type: \"MultiPolygon\",\n                  coordinates: item.coordinates\n                }\n              }]\n            },\n            linePaint: {\n              \"line-width\": 0\n            },\n            fillPaint: {\n              \"fill-color\": item.color,\n              \"fill-opacity\": 0.3\n            }\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, _this);\n        }), popUpCor[0] !== undefined ? /*#__PURE__*/_jsxDEV(Mapir.Popup, {\n          coordinates: popUpCor,\n          offset: null,\n          children: !isLoading && allData[0] !== undefined ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center rtl font-weight-bold font\",\n              children: [\"\\u0634\\u0627\\u062E\\u0635 \\u0622\\u0644\\u0648\\u062F\\u06AF\\u06CC :                      \", allData[0].value]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font text-center\",\n              children: allData[0].message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-center m-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner-border\",\n              role: \"status\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sr-only\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, _this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slidebar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 mx-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-box\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-box__item flex-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control search-input shadow\",\n                type: \"text\",\n                id: \"search\",\n                onChange: function onChange(e) {\n                  return setText(e.target.value);\n                },\n                value: text,\n                placeholder: \"\\u062C\\u0633\\u062A\\u062C\\u0648\\u06CC \\u0645\\u0648\\u0642\\u0639\\u06CC\\u062A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 17\n              }, _this), results.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"clear-seach\",\n                onClick: function onClick() {\n                  return clearSearch();\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \" \\u2716 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, _this), results.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container search-box__item search-results\",\n              children: results.map(function (item) {\n                if (item.notFound === true) {\n                  return /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-center p-2\",\n                    children: \"\\u0646\\u062A\\u06CC\\u062C\\u0647 \\u0627\\u06CC \\u06CC\\u0627\\u0641\\u062A \\u0646\\u0634\\u062F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 25\n                  }, _this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: function onClick() {\n                      setPopUpCor([item.geom.coordinates[0], item.geom.coordinates[1]]);\n                      setCenter(item.geom.coordinates);\n                      clearSearch();\n                      setAddress(item.address);\n                      setZoom([14]);\n                    },\n                    className: \"search-result-item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"search-result-item-title\",\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: \"https://map.ir/css/images/marker-default-white.svg\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 426,\n                        columnNumber: 29\n                      }, _this), item.title]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 425,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"search-result-item-address\",\n                      children: item.address\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 429,\n                      columnNumber: 27\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 25\n                  }, _this);\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, _this), address.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"location-box  text-center mt-4 p-1\",\n            children: address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 15\n          }, _this) : null, allData.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"slide-card mt-4 mx-2 shadow text-center py-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 text-center p-2 h5\",\n              children: \"\\u0634\\u0627\\u062E\\u0635 \\u0622\\u0644\\u0648\\u062F\\u06AF\\u06CC \\u0647\\u0648\\u0627\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, _this), !isLoading ? /*#__PURE__*/_jsxDEV(PieChart, {\n              width: 250,\n              height: 150,\n              children: [/*#__PURE__*/_jsxDEV(Pie, {\n                data: allData,\n                cx: 80,\n                cy: 75,\n                startAngle: 180,\n                endAngle: 0,\n                innerRadius: 60,\n                outerRadius: 80,\n                fill: \"#8884d8\",\n                paddingAngle: 0,\n                dataKey: \"value\",\n                children: allData.map(function (entry, index) {\n                  return /*#__PURE__*/_jsxDEV(Cell, {\n                    fill: colorAll[index % colorAll.length]\n                  }, \"cell-\".concat(index), false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 25\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"text\", {\n                className: \"h2 font-weight-bold\",\n                x: 80,\n                y: 90,\n                dy: 8,\n                scaleToFit: true,\n                textAnchor: \"middle\",\n                fill: colorAll[0],\n                children: allData[0].value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"text\", {\n                x: 80,\n                y: 120,\n                dy: 8,\n                textAnchor: \"middle\",\n                fill: \"#000000\",\n                children: allData[0].message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 19\n            }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner-border\",\n                  role: \"status\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\",\n                    children: \"Loading...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 15\n          }, _this) : null, coordinateData.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row slide-card mt-4 mx-2 shadow text-center py-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 text-center p-2 h5\",\n              children: \"\\u0634\\u0627\\u062E\\u0635 \\u0622\\u0644\\u0627\\u06CC\\u0646\\u062F\\u0647 \\u0647\\u0627\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 17\n            }, _this), !isLoading ? coordinateData.map(function (item, index) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-4 py-2\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-8 font-weight-bold px-1\",\n                    children: item.key\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 509,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-8 text-muted px-1\",\n                    children: item.value\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 512,\n                    columnNumber: 25\n                  }, _this), color(item.value)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 21\n              }, _this);\n            }) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner-border\",\n                  role: \"status\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\",\n                    children: \"Loading...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 15\n          }, _this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 324,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Map, \"h/fmc7L0vhqMhFhhlCNj3b3qvVM=\");\n\n_c = Map;\nexport default Map; // [\n//   [\n//     [51.5259, 35.7653], \n//     [51.5286, 35.7653], \n//     [51.5286, 35.7675], \n//     [51.5259, 35.7675], \n//     [51.5259, 35.7653]\n//   ]\n// ], \n// [\n//   [\n//     [51.5286, 35.7653],\n//     [51.5314, 35.7653],\n//     [51.5314, 35.7675],\n//     [51.5286, 35.7675],\n//     [51.5286, 35.7653]\n//   ]\n// ]\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"sources":["/home/alireza/Desktop/Front/Sedreh-Asena-main/src/components/map/Map.js"],"names":["React","useState","useEffect","Mapir","PieChart","Pie","Sector","Cell","ResponsiveContainer","MapLayout","utils","axios","mapIr","setToken","transformRequest","url","headers","search","params","fetch","method","body","JSON","stringify","Map","text","setText","$filter","results","setResults","marker","setMarker","center","setCenter","multiPol","setMultiPol","coordinateData","setCoordinateData","allData","setAllData","colorAll","setColorAll","popUpCor","setPopUpCor","address","setAddress","zoom","setZoom","isLoading","setIsLoading","persianToday","getToday","console","log","length","options","key","then","data","json","value","notFound","post","indicator","map","item","coordinates","URLSearchParams","append","array","Math","round","CO","NO2","O3","PM10","PM2_5","SO2","aqi","AQI","msg","all","name","message","color","catch","err","reverseFunction","e","lat","lngLat","lng","response","postal_address","warn","clearSearch","index","type","features","properties","geometry","undefined","target","geom","title","entry"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Mapir from \"mapir-react-component\";\nimport { PieChart, Pie, Sector, Cell, ResponsiveContainer } from \"recharts\";\nimport MapLayout from \"../layout/MapLayout\";\nimport \"./map.css\";\nimport 'react-modern-calendar-datepicker/lib/DatePicker.css';\nimport {utils} from 'react-modern-calendar-datepicker';\nimport axios from \"axios\";\n\nconst mapIr = Mapir.setToken({\n  transformRequest: (url) => {\n    return {\n      url: url,\n      headers: {\n        \"x-api-key\":\n          \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\", //Mapir api key\n        \"Mapir-SDK\": \"reactjs\",\n      },\n    };\n  },\n});\n\nconst search = (params) => {\n  return fetch(`https://map.ir/search/v2/`, {\n    method: \"POST\",\n    headers: {\n      \"x-api-key\":\n        \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\", //Mapir api key,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(params),\n  });\n};\n\nconst Map = () => {\n  const [text, setText] = useState(\"\");\n\n  const [$filter] = useState(\"province eq تهران\");\n\n  const [results, setResults] = useState([]);\n\n  const [marker, setMarker] = useState(null);\n\n  const [center, setCenter] = useState([51.33806228911658, 35.6997848215501]);\n\n  const [multiPol, setMultiPol] = useState([]);\n\n  const [coordinateData, setCoordinateData] = useState([]);\n\n  const [allData, setAllData] = useState([]);\n\n  const [colorAll, setColorAll] = useState([]);\n\n  const [popUpCor, setPopUpCor] = useState([]);\n\n  const [address, setAddress] = useState(\"\");\n\n  const [zoom, setZoom] = useState([11]);\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const persianToday = utils('fa').getToday();\n\n  useEffect(()=>{\n    console.log(persianToday)\n  },[])\n\n  useEffect(() => {\n    if (text.length > 1) {\n      const params = {};\n      const options = { text, $filter };\n      for (let key in options) {\n        if (options[key] !== null && options[key] !== \"\") {\n          params[key] = options[key];\n        }\n      }\n      search(params)\n        .then((data) => data.json())\n        .then((data) => {\n          if (data[\"odata.count\"] > 0) {\n            setResults(data.value);\n          } else {\n            setResults([{ notFound: true }]);\n          }\n        });\n    } else if (text.length === 0) {\n      setResults([]);\n    }\n  }, [text]);\n \nuseEffect( ()=>{\n  axios.post(\"http://127.0.0.1:8000/get_polygons\",null,{}).then(({data})=>{\n\n    console.log(data)\n\n  \n\n    // data.indicator.map((item) => {\n\n      // finalArr.cor.push(item.coordinates)\n\n\n      \n      // if (item.AQI <= 50) {\n      //   finalArr[0].cor.push(item.coordinates)\n      // } else if (item.AQI <= 100 && item.AQI > 50) {\n      //   finalArr[1].cor.push(item.coordinates)\n\n      // } else if (item.AQI <= 150 && item.AQI > 100) {\n      //   finalArr[2].cor.push(item.coordinates)\n\n      // } else if (item.AQI <= 200 && item.AQI > 150) {\n      //   finalArr[3].cor.push(item.coordinates)\n\n      // } else {\n      //   finalArr[4].cor.push(item.coordinates)\n      // }\n    \n\n    // });\n\n    // console.log(finalArr);\n    \n     setMultiPol(data.indicator);\n\n    \n      multiPol.map((item)=>{\n      console.log(item , \"multipol item =========>\")\n      console.log([[item.coordinates]])\n    })\n  },[])\n\n\n  //  useEffect(() => {\n  //   console.log('*************************************')\n  //   console.log('Hello')\n  //   console.log('*************************************')\n  //   let headers = new Headers();\n\n  //   headers.append('Content-Type', 'application/json');\n  //   headers.append('Accept', 'application/json');\n  //   headers.append('Origin','http://localhost:3000');\n  //   headers.append('GET', 'POST', 'OPTIONS');\n\n  //   const req = new Request(\n  //     // \"http://5.61.26.213:8080/api/PollutionAppService/MapData\",\n  //     \"http://127.0.0.1:8000/get_polygons\",\n  //     {\n  //       // we turn from GET to POST\n  //       method: \"POST\",\n  //       mode: 'no-cors',\n  //       headers: headers\n  //       // body: JSON.stringify({hello:'world'})\n        \n  //     }\n  //   );\n  //   // req.headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n  //   // req.headers.append('Access-Control-Allow-Credentials', 'true');\n  //   fetch(req)\n  //     .then((res) => {\n  //       // res.json();\n  //       console.error(typeof res,res,\"------- u u -----\")\n  //     })\n  //     .then((data) => {\n  //       console.log(data);\n  //       const finalArr = [];\n  //       let obj = {};\n  //       const array = [];\n  //       let arr = [];\n  //       data.map((item) => {\n  //         arr.push(item.coordinates);\n  //         const index = finalArr.findIndex(\n  //           (element) => element.color === item.color\n  //         );\n  //         if (index === -1) {\n  //           obj = { color: item.color, cor: [arr] };\n  //           finalArr.push(obj);\n  //         } else {\n  //           finalArr[index].cor.push(arr);\n  //         }\n  //         // array.push(arr);\n  //         arr = [];\n  //       });\n  //       console.log(finalArr);\n  //       setMultiPol(finalArr);\n  //     })\n  //     .catch((e) => console.log(e,\"----------------------Error happend-----------------\"));\n   }, []);\n\n  // useEffect(()=>{\n  //   const properties = {\n  //       method: 'POST',\n  //       headers: { 'Content-Type': 'application/json' ,\n  //       'Access-Control-Allow-Origin':'http://localhost:3000',\n  //       'Access-Control-Allow-Credentials': 'true'\n\n  //      },\n  //       // body: JSON.stringify({ title: 'React POST Request Example' })\n  //   }\n    \n\n  //   fetch('http://127.0.0.1:8000/get_polygons',properties)\n  //   .then(response => response.json())\n  //   .then(data => console.warn(data)).catch((e)=> console.error(e,\"----------------------Bad Error-------------\"))\n  // }\n  // ,[])\n\n  useEffect(() => {\n    setIsLoading(true);\n\n    const params = new URLSearchParams();\n    params.append('lat', popUpCor[1]);\n    params.append('lon', popUpCor[0]);\n  \n    axios.post(`http://127.0.0.1:8000/get_point`,params,{\n    }).then(({data})=> {\n      console.log(data);\n         const array = [\n          {\n            key: \"co\",\n            value: Math.round(data.indicator.CO),\n          },\n          {\n            key: \"no2\",\n            value: Math.round(data.indicator.NO2),\n          },\n          {\n            key: \"o3\",\n            value: Math.round(data.indicator.O3),\n          },\n          {\n            key: \"pm10\",\n            value: Math.round(data.indicator.PM10),\n          },\n          {\n            key: \"pm25\",\n            value: Math.round(data.indicator.PM2_5),\n          },\n          {\n            key: \"so2\",\n            value: Math.round(data.indicator.SO2),\n          },\n        ];\n        const aqi = Math.round(data.indicator.AQI);\n        \n        let msg = \"\";\n        if (aqi <= 50) {\n          msg = \"پاک\";\n        } else if (aqi <= 100 && aqi > 50) {\n          msg = \"سالم\";\n        } else if (aqi <= 150 && aqi > 100) {\n          msg = \"ناسالم برای گروه های حساس\";\n        } else if (aqi <= 200 && aqi > 150) {\n          msg = \"ناسالم\";\n        } else {\n          msg = \"بسیار ناسالم\";\n        }\n        const all = Math.round(aqi);\n        setAllData([\n          { name: \"Group A\", value: all, message: msg },\n          { name: \"Group B\", value: 300 - aqi },\n        ]);\n        let color = \"\";\n        if (aqi <= 50) {\n          color = \"#00FF00\";\n        } else if (aqi <= 100 && aqi > 50) {\n          color = \"#FFFF00\";\n        } else if (aqi <= 150 && aqi > 100) {\n          color = \"#FFA500\";\n        } else if (aqi <= 200 && aqi > 150) {\n          color = \"#FF0000\";\n        } else {\n          color = \"#800080\";\n        }\n        // console.log(data);\n        setColorAll([color, \"#f2f7f9\"]);\n        setCoordinateData(array);\n        setIsLoading(false);\n    }).catch((err)=>console.log(err,\"======== error in post\"))\n  }, [popUpCor]);\n\n  // const [center, setCenter] = useState([51.42047, 35.729054]);\n\n  const reverseFunction = (map, e) => {\n    const lat = e.lngLat.lat;\n    const lng = e.lngLat.lng;\n    console.log(lng);\n    console.log(lat);\n    var url = `https://map.ir/reverse/no?lat=${lat}&lon=${lng}`;\n    fetch(url, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-api-key\":\n          \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5In0.eyJhdWQiOiIxNTM0NCIsImp0aSI6ImQ2Mjg2NTBmNGRlNjE3NzMzYjkxNmJhMzdhYTYxNjZiNmU2MDc4ZWM1MmVlZTBkNzNkNWM3OTA5NmY5NjFlZGRhNDgyNjk4MTg1ZjI3OGI5IiwiaWF0IjoxNjMwNTc5NjczLCJuYmYiOjE2MzA1Nzk2NzMsImV4cCI6MTYzMzI2MTY3Mywic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.bWmH1iKtVw6rzpTDzaIrnDT0XotLdDQhOPMHH5L6UJLAMfecYpuzZIpNqY_UxoCMIBhwbaL0kX6LtWBNmG8T1MnXkApYLIdbJr-blld7w85hYLdCb2K0KTmKD72cwtBskeEVNG-ScB4QkLgebvDO__001TjdMZOYR17neAUH5GTS6XkocuHJIQo9C8m2AfDskTGbtG9aygp-Z323O5I2Tb5wa4UhOQYHX6T6bXqgWsLWOgzYMfDjbEdU9jMbg0hOXrtXkAfsojD9UBkJpbI4bRJN0ikm-KLXXC8qRuIXck93Njk3jGJPLO4y6QjDU8aV7ACQck1y2L6Q-ydrg5bDSA\", //Mapir api key,\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => setAddress(data.postal_address));\n    setPopUpCor([lng - 30 , lat -30]);\n    console.warn(popUpCor , \"popup coooooooooooooooooooooor\")\n    setCenter([lng, lat]);\n  };\n\n  const clearSearch = () => {\n    setResults([]);\n    setText(\"\");\n  };\n\n  const color = (value) => {\n    if (value <= 50) {\n      return <div className=\"dot green\"></div>;\n    } else if (value <= 100 && value > 50) {\n      return <div className=\"dot yellow\"></div>;\n    } else if (value <= 150 && value > 100) {\n      return <div className=\"dot orange\"></div>;\n    } else if (value <= 200 && value > 150) {\n      return <div className=\"dot red\"></div>;\n    } else {\n      return <div className=\"dot purple\"></div>;\n    }\n  };\n\n  return (\n    <MapLayout>\n      <div className=\"wrapper\">\n        <Mapir\n          className=\"mapir\"\n          containerStyle={{}}\n          center={center}\n          minZoom={[13]}\n          zoom={zoom}\n          scrollZoom={false}\n          hash={true}\n          interactive={true}\n          Map={mapIr}\n          onClick={reverseFunction}\n        >\n     \n          {multiPol.map((item,index) => (\n            <Mapir.GeoJSONLayer\n             key={index}\n              data={{\n                type: \"FeatureCollection\",\n                features: [\n                  {\n                    type: \"Feature\",\n                    properties: {},\n                    geometry: {\n                      type: \"MultiPolygon\",\n                      coordinates: item.coordinates,\n                    },\n                  },\n                ],\n              }}\n              linePaint={{\n                \"line-width\": 0,\n              }}\n              fillPaint={{\n                \"fill-color\": item.color,\n                \"fill-opacity\": 0.3,\n              }}\n            />\n            ))}  \n\n          {popUpCor[0] !== undefined ? (\n            <Mapir.Popup coordinates={popUpCor} offset={null}>\n              {!isLoading && allData[0] !== undefined ? (\n                <>\n                  <div className=\"text-center rtl font-weight-bold font\">\n                    شاخص آلودگی :                      {allData[0].value}\n                  </div>\n                  <p className=\"font text-center\">{allData[0].message}</p>\n                </>\n              ) : (\n                <div className=\"d-flex justify-content-center m-4\">\n                  <div className=\"spinner-border\" role=\"status\">\n                    <span className=\"sr-only\">Loading...</span>\n                  </div>\n                </div>\n              )}\n            </Mapir.Popup>\n          ) : null}\n        </Mapir>\n\n        <div className=\"slidebar\">\n          <div className=\"mt-4 mx-3\">\n            <div className=\"search-box\">\n              <div className=\"search-box__item flex-row\">\n                <input\n                  className=\"form-control search-input shadow\"\n                  type=\"text\"\n                  id=\"search\"\n                  onChange={(e) => setText(e.target.value)}\n                  value={text}\n                  placeholder=\"جستجوی موقعیت\"\n                />\n                {results.length > 0 && (\n                  <div className=\"clear-seach\" onClick={() => clearSearch()}>\n                    <span> &#10006; </span>\n                  </div>\n                )}\n              </div>\n              {results.length > 0 && (\n                <div className=\"container search-box__item search-results\">\n                  {results.map((item) => {\n                    if (item.notFound === true) {\n                      return (\n                        <p className=\"text-center p-2\">نتیجه ای یافت نشد</p>\n                      );\n                    } else {\n                      return (\n                        <div\n                          onClick={() => {\n                            setPopUpCor([\n                              item.geom.coordinates[0],\n                              item.geom.coordinates[1],\n                            ]);\n                            setCenter(item.geom.coordinates);\n                            clearSearch();\n                            setAddress(item.address);\n                            setZoom([14]);\n                          }}\n                          className=\"search-result-item\"\n                        >\n                          <p className=\"search-result-item-title\">\n                            <img src=\"https://map.ir/css/images/marker-default-white.svg\" />\n                            {item.title}\n                          </p>\n                          <p className=\"search-result-item-address\">\n                            {item.address}\n                          </p>\n                        </div>\n                      );\n                    }\n                  })}\n                </div>\n              )}\n            </div>\n            {address.length > 0 ? (\n              <div className=\"location-box  text-center mt-4 p-1\">\n                {address}\n              </div>\n            ) : null}\n\n            {allData.length > 0 ? (\n              <div className=\"slide-card mt-4 mx-2 shadow text-center py-3\">\n                <div className=\"col-12 text-center p-2 h5\">شاخص آلودگی هوا</div>\n                {!isLoading ? (\n                  <PieChart width={250} height={150}>\n                    <Pie\n                      data={allData}\n                      cx={80}\n                      cy={75}\n                      startAngle={180}\n                      endAngle={0}\n                      innerRadius={60}\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      paddingAngle={0}\n                      dataKey=\"value\"\n                    >\n                      {allData.map((entry, index) => (\n                        <Cell\n                          key={`cell-${index}`}\n                          fill={colorAll[index % colorAll.length]}\n                        />\n                      ))}\n                    </Pie>\n                    <text\n                      className=\"h2 font-weight-bold\"\n                      x={80}\n                      y={90}\n                      dy={8}\n                      scaleToFit={true}\n                      textAnchor=\"middle\"\n                      fill={colorAll[0]}\n                    >\n                      {allData[0].value}\n                    </text>\n                    <text\n                      x={80}\n                      y={120}\n                      dy={8}\n                      textAnchor=\"middle\"\n                      fill={\"#000000\"}\n                    >\n                      {allData[0].message}\n                    </text>\n                  </PieChart>\n                ) : (\n                  <div className=\"col-12\">\n                    <div className=\"d-flex justify-content-center\">\n                      <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ) : null}\n\n            {coordinateData.length > 0 ? (\n              <div className=\"row slide-card mt-4 mx-2 shadow text-center py-3\">\n                <div className=\"col-12 text-center p-2 h5\">شاخص آلاینده ها</div>\n                {!isLoading ? (\n                  coordinateData.map((item, index) => (\n                    <div className=\"col-4 py-2\">\n                      <div className=\"row\">\n                        <div className=\"col-8 font-weight-bold px-1\">\n                          {item.key}\n                        </div>\n                        <div className=\"col-8 text-muted px-1\">\n                          {item.value}\n                        </div>\n                        {color(item.value)}\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"col-12\">\n                    <div className=\"d-flex justify-content-center\">\n                      <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </MapLayout>\n  );\n};\nexport default Map;\n\n\n\n// [\n//   [\n//     [51.5259, 35.7653], \n//     [51.5286, 35.7653], \n//     [51.5286, 35.7675], \n//     [51.5259, 35.7675], \n//     [51.5259, 35.7653]\n//   ]\n// ], \n// [\n//   [\n//     [51.5286, 35.7653],\n//     [51.5314, 35.7653],\n//     [51.5314, 35.7675],\n//     [51.5286, 35.7675],\n//     [51.5286, 35.7653]\n//   ]\n// ]\n"]},"metadata":{},"sourceType":"module"}